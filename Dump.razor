clearignore

//open tome chest
dclick 0x5B7C7BBD
wait 600


//seeds
menu 0x42C8FB09 0
wft 2500
target self

//dump gold
while findtype 3891|3821 self as 'myGold'
    lift myGold 60000
    drop '0x40820133' -1 -1 0 
    wait 600
endwhile

//dump into all tomes 
while findtype 29104 0x5B7C7BBD as found
    //overhead "Book"
    menu found 0
    wait 75
    ignore found
endwhile
clearignore

//repair
dclick 0x61F237E9
wait 600

overhead "Starting Organizers"
organizer 1
while queued
    wait 1000
endwhile
organizer 2
while queued
    wait 1000
endwhile
organizer 3
while queued
    wait 1000
endwhile
organizer 4
while queued
    wait 1000
endwhile
organizer 5
while queued
    wait 1000
endwhile
organizer 6
while queued
    wait 1000
endwhile
organizer 7
while queued
    wait 1000
endwhile
organizer 8
while queued
    wait 1000
endwhile
organizer 9
while queued
    wait 1000
endwhile
wait 1000

while findtype "cooked fish"  as found
    dclicktype "dagger"
    wft 2500
    target found
    #wait 400
    ignore found
endwhile
while findtype "fish"  as found
    dclicktype "dagger"
    wft 2500
    target found
    #wait 400
    ignore found
endwhile

//dump all supply shelf
menu 0x407F8ACB 0 
wft 2500
target self
menu 0x407F8ACB 1                
gumpclose 3232825965 
overhead "Done with shelf"     
gumpclose 3232825965   

//dump all resources
dclick 0x4004288C
waitforgump 1859005118
gumpresponse 2
waitfortarget
waitforgump 1859005118
target 'self'
wait 500
gumpclose 1859005118
wait 500

clearignore 
//dump pack llama
while findtype 292 ground any any 2 as found
    overhead 'Packhorse dump routine' 55
    
    dclick found
    wait 500
    //dump all supply shelf
    menu 0x4083AF65 0
    waitfortarget
    target found
    wait 500
    gumpclose
    wait 500

    //dump all resources
    dclick 0x407F8ACB
    waitforgump 1859005118
    gumpresponse 2
    waitfortarget
    waitforgump 1859005118
    target found
    wait 500
    gumpclose
    wait 500
    
    #dump gold
    

    while findtype 3821 'found' as 'myGold'
        lift myGold 60000
        drop '0x40820133' -1 -1 0 
        wait 600
    endwhile

    ignore found
endwhile   


//dump pack horse
while findtype 291 ground any any 2 as found
    overhead 'Packhorse dump routine' 55
    
    dclick found
    wait 500
    //dump all supply shelf
    menu 0x4083AF65 0
    waitfortarget
    target found
    wait 500
    gumpclose
    wait 500

    //dump all resources
    dclick 0x407F8ACB
    waitforgump 1859005118
    gumpresponse 2
    waitfortarget
    waitforgump 1859005118
    target found
    wait 500
    gumpclose
    wait 500
    
    #dump gold
    

    while findtype 3821 'found' as 'myGold'
        lift myGold 60000
        drop '0x40820133' -1 -1 0 
        wait 600
    endwhile

    ignore found
endwhile    

gumpclose 3232825965   


if findtype 'crate' ground any any 1 as foundcrate
    dclick foundcrate
    menu 0x407F8ACB 0
    waitfortarget 500
    target foundcrate
    wait 100
    menu 0x4004288C 0
    waitfortarget 500
    target foundcrate 
    while findtype 3891|3821 foundcrate as 'myGold'
        lift myGold 60000
        drop '0x40820133' -1 -1 0 
        wait 600
    endwhile
    while findtype 'pouch' foundcrate as 'myGold'
        lift myGold 60000
        drop '0x465CE02E' -1 -1 0 
        wait 600
    endwhile
endif    

//Recycler
wait 500
menu 0x465CE02E 1
dclick 0x465CE02E
waitforgump 4045111101
gumpresponse 7 4045111101
waitforgump 4045111101
gumpresponse 6 4045111101
waitforgump 4045111101
gumpresponse 6 4045111101
waitforgump 4045111101
menu 0x407F8ACB 0 
wft 500
target 0x465CE02E
wait 100
menu 0x42448EE2 0
wft 500 
target 0x465CE02E
wait 100
menu 0x4004288C 0
wft 500 
target 0x465CE02E

wait 100
menu 0x407F8ACB 1



clearignore

script "stayalive2"