//check for valuable shit
if findtype 8454|8455|43206|5363 self
    while not targetexists 
        overhead "You have valuable shit on you! Open target cursor to continue anyway stupidly" 17
        sysmsg  "You have valuable shit on you! Open target cursor to continue anyway stupidly" 17
        wait 500
    endwhile
endif 


//Get ready to sail
overhead "Target Tillerman"
@setvar tillerguy 

//get on boat
dclick tillerguy
wait 250
gumpresponse 201 4216593270
wait 255
//load pets
gumpresponse 202 4216593270
wait 255
gumpclose 4216593270
wait 255

//Check spyglasses
if findtype 5365
    #do nothing
else 
    overhead "no spyglasses!" 33
    overhead "no spyglasses!" 33
    overhead "no spyglasses!" 33
endif

//bring up codex
say '[codexhotbar'
wait 250

//ready crew load guns etc
say '[recallBoarding'
wait 250
say '[Reload'
wait 250
say '[ReadyCrew'
wait 250
say '[ShipHotbars'
unsetvar noidBag

waitforgump 455990628
while not ingump "Accuracy" 455990628
    gumpresponse 1 455990628
    waitforgump 455990628
endwhile    
    
@setvar onABoat 1

overhead "Go to hull target top hp bar"
@setvar shipStatusBar

#Check for a ship hold
if findtype '16019' ground any any 3 true as found
    @setvar myShipHold found
elseif findtype '16046' ground any any 3 true as found
    @setvar myShipHold found
elseif findtype '15973' ground any any 3 true as found
    @setvar myShipHold found
elseif findtype '16057' ground any any 3 true as found
     setvar myShipHold found
else 
    overhead "Cannot find hold, target"
    @setvar! myShipHold
endif    

if findtype 3705 self as foundbag
    unsetvar noidBag
    setvar! noidBag foundbag
    @drop backpack
    lift foundbag 9999
    drop myShipHold -1 -1 0 
    wait 600
endif

hotkey "Play Script: Full dump boat"