#Must set up organizer 15-18 as pack
#horses.  
#Need magery 60
#Need tracking turned on
#Put a lute in your pack
#  It will be annoying when done
#  In case you are multitasking
# and set to all hostile not in houses/party/guild
#Have a marked recall rune in pack and regs
#Equip a pickaxe or it will halt until you do


#Find our packhorse and store them
#In variables

#This must be organizer 15
@setvar pack1 0xAD026 
#This must be organizer 16
@setvar pack2 0xAD025 
#This must be organizer 17
@setvar pack3 0xB198E 
#This must be organizer 18
@setvar pack4 0xB198F 

if not timerexists "miner"
    createtimer "miner"
    settimer "miner" 1100
endif

clearsysmsg
overhead 'Starting'
while not insysmsg 'You do not see any'
    if insysmsg 'Now tracking'
        say 'Ah shit!!!'
        cast 'recall'
        waitfortarget
        targettype '7956'backpack
        wait 5000
        break
    endif
    if weight >= maxweight - 25
        overhead 'Too fat - restart'
        break
    endif
    if insysmsg 'Harvesting is not'
        overhead 'Cant harvest'
        break
    endif
    if insysmsg 'recently travel'
        overhead 'Just recalled'
        break
    endif
    if insysmsg 'You have worn out your tool!'
        break
    endif

    if timer "miner" >= 1000
        hotkey 'use item in hand'
        settimer "miner" 0
        wait 200
    endif
    
endwhile

overhead 'Spot Done' 33
overhead 'Spot Done' 33
sysmsg  'Spot Done' 33
sysmsg 'Spot Done' 33
dclicktype 'lute'

#Dump ore if we have it



if findtype 6585 'backpack'
    if counttype 6585 pack1 <= 220
        overhead 'Pack1' 15
        organizer 15
        while queued
            wait 1000
        endwhile
    elseif counttype 6585 pack2 <= 220
        overhead 'Pack2' 15
        organizer 16
        while queued
            wait 1000
        endwhile
    elseif counttype 6585 pack3 <= 220
        overhead 'Pack3' 15
        organizer 17
        while queued
            wait 1000
        endwhile
    elseif counttype 6585 pack4 <= 220
        overhead 'Pack4' 15
        organizer 18
        while queued
            wait 1000
        endwhile
    else 
        overhead 'Packs are full!' 33
        overhead 'Packs are full!' 33
        sysmsg  'Packs are full!' 33
        sysmsg 'Packs are full!' 33
    endif
endif

hotkey 'All Names'

clearsysmsg
while not insysmsg 'ore'
    if timer "miner" >= 3000
        dclicktype 'lute'
        overhead 'Tracking'
        settimer miner 0
    endif
    if insysmsg 'Now tracking'
        say 'Ah shit!!!'
        cast 'recall'
        waitfortarget
        targettype '7956'
        break
    endif
    wait 500
    
    if weight >= 365
        overhead 'Too fat'
    endif
endwhile